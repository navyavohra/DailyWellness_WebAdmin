<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courses</title>
</head>

<body>
    <div align="center">
        <h1>Courses</h1>
    </div>

    <div class="modal fade" id="GetModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Course View</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form role="form" [formGroup]="GetForm">
                        <label for="title">Course Name</label>
                        <input aria-disabled="true" type="text" name="courseName" id="courseName"
                            formControlName="courseName" class="form-control">
                        <label for="title">Course Description</label>
                        <textarea aria-disabled="true" type="text" name="courseDescription" id="courseDescription"
                            formControlName="courseDescription" class="form-control"></textarea>
                        <br>
                        <div align="center">
                            <button class="btn btn-primary" data-toggle="modal"
                                data-target="#QuestionsModal">Questions</button> OR
                            <button class="btn btn-primary" data-toggle="modal"
                                data-target="#SuggestionsModal">Suggestions</button>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="singledata" class="modal fade" id="QuestionsModal" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Questions View</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div *ngFor="let questions of singledata.questions; let i = index">
                        <p>Question {{i + 1}}: {{questions.question}}</p>
                        <div *ngFor="let options of questions.options">
                            <p>Options: {{options.text}}</p>
                            <p>Score: {{options.score}}</p>
                        </div>
                        <hr class="rounded">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="singledata" class="modal fade" id="SuggestionsModal" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Suggestions View</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div *ngFor="let suggestions of singledata.suggestions; let i = index">
                        <p>Suggestion {{i + 1}} : {{suggestions.suggestion}}</p>
                        <p>Score: {{suggestions.score}}</p>
                        <hr class="rounded">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="AddModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Add Course</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form role="form" [formGroup]="AddForm">
                        <label for="title">Course Name</label>
                        <input aria-disabled="true" type="text" name="courseName" id="courseName"
                            [ngClass]="{'is-invalid': fvaladd['courseName'].errors} || {'is-valid': !fvaladd['courseName'].errors}"
                            formControlName="courseName" class="form-control">
                        <label for="title">Course Description</label>
                        <textarea aria-disabled="true" type="text" name="courseDescription" id="courseDescription"
                            [ngClass]="{'is-invalid': fvaladd['courseDescription'].errors} || {'is-valid': !fvaladd['courseDescription'].errors}"
                            formControlName="courseDescription" class="form-control"></textarea>
                        <br>
                        <label for="inputGroupFile01">Thumbnail</label>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
                            </div>
                            <div class="custom-file">
                                <input type="file" name="courseImage" (change)="SelectThumbs($event)" accept="image/*"
                                    [ngClass]="{'is-invalid': fvaladd['courseImage'].errors} || {'is-valid': !fvaladd['courseImage'].errors}"
                                    formControlName="courseImage" class="custom-file-input " id="inputGroupFile01"
                                    aria-describedby="inputGroupFileAddon01" required>
                                <label class="custom-file-label" for="inputGroupFile01">Choose file</label>
                            </div>
                        </div>
                        <div *ngIf="fvaladd['courseImage'].errors" class="invalid-feedback">Thumbnail file is
                            required.
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button class="btn btn-primary" data-dismiss="modal" data-toggle="modal"
                        data-target="#AddQuestionsModal" [disabled]="!AddForm.valid">Next</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="AddQuestionsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Add Questions</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form role="form" [formGroup]="AddQuestionForm">
                        <label for="question">Enter your question</label>
                        <input type="text" formControlName="question" name="question" id="question"
                            class="form-control">
                        <label for="option1">Enter option 1</label>
                        <input type="text" formControlName="option1" name="option1" id="option1" class="form-control">
                        <label for="score1">Enter score for option 1</label>
                        <input type="number" formControlName="score1" name="score1" id="score1" class="form-control">
                        <label for="option2">Enter option 2</label>
                        <input type="text" formControlName="option2" name="option2" id="option2" class="form-control">
                        <label for="score2">Enter score for option 2</label>
                        <input type="number" formControlName="score2" name="score2" id="score2" class="form-control">
                    </form>
                    <span class="note">Note: Click on Add button to add the question before going on to next
                        step.</span>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" (click)="SaveQuestions()">Add</button>
                    <button class="btn btn-primary" data-dismiss="modal" data-toggle="modal"
                        data-target="#AddSuggestionsModal">Next</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="AddSuggestionsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Add Suggestions</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form role="form" [formGroup]="AddSuggestionForm">
                        <label for="suggestion">Enter your suggestion</label>
                        <input type="text" formControlName="suggestion" name="suggestion" id="suggestion"
                            class="form-control">
                        <label for="score">Enter Score</label>
                        <input type="number" formControlName="score" name="score" id="score" class="form-control">
                    </form>
                    <span class="note">Note: Click on Add button to add the suggestion before submitting.</span>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" (click)="SaveSuggestions()">Add</button>
                    <button class="btn btn-primary"
                        [disabled]="!AddForm.valid" (click)="AddCourse()">Add Course</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="UpdateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Update Course</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form role="form" [formGroup]="UpdateForm">
                        <label for="title">Course Name</label>
                        <input aria-disabled="true" type="text" name="courseName" id="courseName"
                            [ngClass]="{'is-invalid': fvalupdate['courseName'].errors} || {'is-valid': !fvalupdate['courseName'].errors}"
                            formControlName="courseName" class="form-control">
                        <label for="title">Course Description</label>
                        <input aria-disabled="true" type="text" name="courseDescription" id="courseDescription"
                            [ngClass]="{'is-invalid': fvalupdate['courseDescription'].errors} || {'is-valid': !fvalupdate['courseDescription'].errors}"
                            formControlName="courseDescription" class="form-control">
                        <br>
                        <label for="inputGroupFile01">Thumbnail</label>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
                            </div>
                            <div class="custom-file">
                                <input type="file" name="courseImage" (change)="SelectThumbs($event)" accept="image/*"
                                    [ngClass]="{'is-invalid': fvalupdate['courseImage'].errors}"
                                    formControlName="courseImage" class="custom-file-input " id="inputGroupFile01"
                                    aria-describedby="inputGroupFileAddon01">
                                <label class="custom-file-label" for="inputGroupFile01">Choose file</label>
                            </div>
                        </div>
                        <div *ngIf="fvalupdate['courseImage'].errors" class="invalid-feedback">Thumbnail file is
                            required.
                        </div>


                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal"
                        >Close</button>
                        <button class="btn btn-primary" (click)="UpdateCourse()"
                        [disabled]="!UpdateForm.valid">Update</button>
                    <button class="btn btn-primary" data-dismiss="modal" data-toggle="modal"
                        data-target="#UpdateQuestionsModal">Next</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="UpdateQuestionsModal" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Update Questions</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form role="form" [formGroup]="UpdateQuestionsForm">
                        <div formArrayName="UpdatequestionsArray"
                            *ngFor="let contact of UpdatequestionsArray.controls; let i = index">
                            <div [formGroupName]="i">
                                <div>
                                    <label for="inputName">Question {{i + 1}} : </label>
                                    <input type="text" placeholder="Question" class="form-control"
                                        formControlName="question" autofocus>
                                    <label for="inputName">Option: </label>
                                    <input type="text" placeholder="Question" class="form-control"
                                        formControlName="option1">
                                    <label for="inputName">Score: </label>
                                    <input type="number" placeholder="Question" class="form-control"
                                        formControlName="score1">
                                    <label for="inputName">Option: </label>
                                    <input type="text" placeholder="Question" class="form-control"
                                        formControlName="option2">
                                    <label for="inputName">Score: </label>
                                    <input type="number" placeholder="Question" class="form-control"
                                        formControlName="score2">
                                </div>
                            </div>
                            <hr class="rounded">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button class="btn btn-primary" (click)="addquestionsmt()">Add</button>
                    <button class="btn btn-primary" data-dismiss="modal" data-toggle="modal"
                        data-target="#UpdateSuggestionsModal">Next</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="UpdateSuggestionsModal" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Update Suggestions</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form role="form" [formGroup]="UpdateSuggestionsForm">
                        <div formArrayName="UpdateSuggestionsArray"
                            *ngFor="let contact of UpdateSuggestionsArray.controls; let i = index">
                            <div [formGroupName]="i">
                                <div>
                                    <label for="inputName">Suggestion {{i + 1}} : </label>
                                    <input type="text" placeholder="Suggestion" class="form-control"
                                        formControlName="suggestion" autofocus>
                                    <label for="inputName">Score: </label>
                                    <input type="number" placeholder="Score" class="form-control" formControlName="score">
                                </div>
                                <hr class="rounded">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button class="btn btn-primary" (click)="addSuggestionsmt()">Add</button>
                    <button class="btn btn-primary" [disabled]="!UpdateForm.valid"
                        (click)="UpdateCourse()">Update Course</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="DeleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Are you sure you want to delete this course?</h5>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" (click)="CancelDelete()"
                        data-dismiss="modal">No</button>
                    <button type="button" class="btn btn-primary" (click)="ConfirmDelete()">Yes</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="SuccessModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">{{successMessage}}</h5>
                </div>
                <div align="center" style="padding: 5px;">
                    <button type="button" class="btn btn-secondary" (click)="Reload()"
                        data-dismiss="modal">OK</button>&nbsp;
                    <br>
                </div>
            </div>
        </div>
    </div>

    <div align="center">
        <button class="btn btn-primary" data-toggle="modal" data-target="#AddModal"> Add Course </button>
    </div>
    <br>
    <div align="center">
        <div class="table-div shadow-lg mb-5 bg-light">
            <table>
                <thead>
                    <tr>
                        <th>Course Name</th>
                        <th>Course Description</th>

                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let course of resultdata">
                        <td data-toggle="modal" data-target="#GetModal" (click)="getSingleCourse(course.id)">
                            {{course.courseName}}</td>
                        <td data-toggle="modal" data-target="#GetModal" (click)="getSingleCourse(course.id)">
                            {{course.courseDescription}}</td>
                        <td>
                            <div class="btn-group">
                                <a href="{{course.courseImage}}" target="_blank"><button class="btn btn-primary"><i
                                            class="fa fa-eye" aria-hidden="true"></i></button></a>
                                &nbsp;
                                <button class="btn btn-danger" (click)="deleteCourse(course.id)" data-toggle="modal"
                                    data-target="#DeleteModal"><i class="fa fa-trash" aria-hidden="true"></i></button>
                                &nbsp;
                                <button class="btn btn-primary" (click)="getCoursebyId(course.id)" data-toggle="modal"
                                    data-target="#UpdateModal"><i class="fa fa-pencil" aria-hidden="true"></i></button>

                            </div>

                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>

</html>